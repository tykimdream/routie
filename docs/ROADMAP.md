# Routie — 개발 로드맵

## 1. 전체 타임라인 개요

```
Phase 0: 프로젝트 셋업           (1주)
Phase 1: 핵심 백엔드             (2주)
Phase 2: 핵심 프론트엔드          (3주)
Phase 3: 경로 최적화 엔진         (2주)
Phase 4: 의사결정 지원 + 통합      (2주)
Phase 5: PWA + 오프라인 + QA      (1주)
Phase 6: 배포 + 런칭              (1주)
─────────────────────────────────
총 MVP 예상: 약 12주
```

---

## 2. Phase 0: 프로젝트 셋업 (1주)

### 목표

개발 환경, 모노레포, CI/CD, DB 기초 설정

### 태스크

| #   | 태스크                 | 상세                              |
| --- | ---------------------- | --------------------------------- |
| 0.1 | 모노레포 초기화        | Turborepo or pnpm workspace 설정  |
| 0.2 | Next.js 앱 생성        | `apps/web` — App Router, Tailwind |
| 0.3 | NestJS 앱 생성         | `apps/server` — 기본 모듈 구조    |
| 0.4 | Supabase 프로젝트 생성 | DB, Auth 설정                     |
| 0.5 | Prisma 초기 설정       | 스키마 정의, 마이그레이션         |
| 0.6 | 공유 패키지            | `packages/shared` — 타입, 유틸    |
| 0.7 | ESLint + Prettier      | 공통 린트 설정                    |
| 0.8 | GitHub repo + CI       | GitHub Actions (lint, build)      |
| 0.9 | 환경변수 관리          | `.env.example`, 문서화            |

### 완료 기준

- `pnpm dev`로 프론트·백엔드 동시 실행
- Prisma migrate 성공
- CI에서 lint + build 통과

---

## 3. Phase 1: 핵심 백엔드 (2주)

### Week 1: 인증 + 여행 CRUD

| #   | 태스크        | 상세                               |
| --- | ------------- | ---------------------------------- |
| 1.1 | Auth 모듈     | Supabase Auth 연동, JWT 검증 Guard |
| 1.2 | User 모듈     | 프로필 조회/수정                   |
| 1.3 | Trip 모듈     | 여행 CRUD (생성, 조회, 수정, 삭제) |
| 1.4 | Prisma 서비스 | 글로벌 DB 연결, 트랜잭션 헬퍼      |
| 1.5 | 에러 핸들링   | 글로벌 예외 필터, 에러 형식 통일   |

### Week 2: 장소 + Google Maps 연동

| #    | 태스크           | 상세                                 |
| ---- | ---------------- | ------------------------------------ |
| 1.6  | Google Maps 모듈 | Places API 연동 (검색, 상세 정보)    |
| 1.7  | Place 모듈       | 장소 검색, 저장, 상세 정보 조회      |
| 1.8  | PlaceDetail 저장 | 시그니처 메뉴, 하이라이트, 리뷰 파싱 |
| 1.9  | TripPlace 모듈   | 여행-장소 연결, 가중치, 순서         |
| 1.10 | Rate Limiting    | 요청 제한 (Redis or 메모리)          |

### 완료 기준

- 회원가입/로그인 → 여행 생성 → 장소 검색/추가 플로우 동작
- Google Places API에서 장소 검색, 상세 정보 가져오기 성공
- API 테스트 (Postman/Insomnia 컬렉션)

---

## 4. Phase 2: 핵심 프론트엔드 (3주)

### Week 3: 기본 UI + 인증

| #   | 태스크         | 상세                                          |
| --- | -------------- | --------------------------------------------- |
| 2.1 | 디자인 시스템  | 기본 UI 컴포넌트 (Button, Card, Input, Sheet) |
| 2.2 | 레이아웃       | 앱 셸 (Header, BottomNav, 반응형)             |
| 2.3 | 인증 화면      | 로그인, 회원가입, Google OAuth                |
| 2.4 | 인증 상태관리  | Supabase Auth + 토큰 관리                     |
| 2.5 | API 클라이언트 | Axios/Fetch 래퍼 + TanStack Query 설정        |

### Week 4: 여행 + 장소 관리

| #    | 태스크              | 상세                                               |
| ---- | ------------------- | -------------------------------------------------- |
| 2.6  | 홈 화면             | 여행 목록, 여행 카드                               |
| 2.7  | 여행 생성 폼        | 스텝 폼 (도시, 날짜, 시간, 교통)                   |
| 2.8  | 장소 검색           | Google Places Autocomplete UI                      |
| 2.9  | Takeout 파일 업로드 | Google Takeout JSON/CSV 파일 업로드 UI + 파싱 로직 |
| 2.10 | 장소 목록           | 카테고리 필터, 가중치 표시                         |
| 2.11 | 장소 가중치         | 스와이프 제스처, 3단계 변경                        |
| 2.12 | 드래그 앤 드롭      | 장소 순서 변경 (dnd-kit)                           |

### Week 5: 장소 상세 + 지도

| #    | 태스크              | 상세                                    |
| ---- | ------------------- | --------------------------------------- |
| 2.13 | 장소 상세 시트      | 바텀시트 (사진, 하이라이트, 메뉴, 리뷰) |
| 2.14 | 장소 비교 카드      | 같은 카테고리 비교 정보 표시            |
| 2.15 | Google Map 컴포넌트 | 지도 렌더링, 마커, 커스텀 스타일        |
| 2.16 | 장소 지도 뷰        | 추가한 장소들을 지도 위에 표시          |
| 2.17 | 로딩/빈/에러 상태   | 스켈레톤 UI, 빈 상태 일러스트           |

### 완료 기준

- 로그인 → 여행 생성 → 장소 검색/추가 → 가중치 설정 전체 플로우 동작
- 장소 상세에서 시그니처 메뉴, 평점, 하이라이트 확인 가능
- 모바일에서 스와이프, 드래그 앤 드롭 매끄럽게 동작

---

## 5. Phase 3: 경로 최적화 엔진 (2주)

### Week 6: 최적화 알고리즘

| #   | 태스크                 | 상세                                   |
| --- | ---------------------- | -------------------------------------- |
| 3.1 | Distance Matrix 서비스 | Google Distance Matrix API 연동 + 캐싱 |
| 3.2 | 제약 조건 모델링       | 시간 윈도우, 영업시간, 필수 장소       |
| 3.3 | TSP 솔버               | Nearest Neighbor + 2-opt 구현          |
| 3.4 | 가중치 반영            | 목적함수에 MUST/WANT/OPTIONAL 반영     |
| 3.5 | 다중 경로 생성         | 효율/여유/맞춤 3종 경로 생성           |

### Week 7: 경로 결과 + 의사결정 정보

| #    | 태스크          | 상세                               |
| ---- | --------------- | ---------------------------------- |
| 3.6  | Directions 연동 | 경로별 실제 폴리라인 + 턴바이턴    |
| 3.7  | 선택 사유 생성  | 각 장소 선택/제외 이유 텍스트 생성 |
| 3.8  | 제외 장소 정보  | 못 간 장소 + 이유 + 대안 일정 제안 |
| 3.9  | Route API 완성  | optimize, 조회, 수정, 정차지 제거  |
| 3.10 | 경로 재계산     | 장소 변경 시 빠른 재최적화         |

### 완료 기준

- 10개 장소로 10초 이내 경로 3개 생성
- 각 경로에 장소별 선택 사유 포함
- 제외 장소에 이유 + 대안 제안 포함

---

## 6. Phase 4: 의사결정 지원 + 통합 (2주)

### Week 8: 경로 결과 UI

| #   | 태스크            | 상세                             |
| --- | ----------------- | -------------------------------- |
| 4.1 | 경로 지도 뷰      | 마커 + 폴리라인 + 번호 핀        |
| 4.2 | 타임라인 뷰       | 시간순 카드 리스트 + 이동 정보   |
| 4.3 | 경로 탭 전환      | 효율/여유/맞춤 스와이프 전환     |
| 4.4 | 경로 비교 화면    | 3개 경로 나란히 비교             |
| 4.5 | 경로 내 장소 교체 | 같은 카테고리 교체 + 시간 재계산 |

### Week 9: 의사결정 강화 + 경로 수정

| #    | 태스크                   | 상세                                       |
| ---- | ------------------------ | ------------------------------------------ |
| 4.6  | 경로 수정 (드래그)       | 타임라인 순서 변경 → 실시간 재계산         |
| 4.7  | 장소 제거/추가           | 경로에서 제거 시 대안 추천, 여유 시간 표시 |
| 4.8  | 선택 사유 UI             | 각 정차지에 "왜 이 장소인지" 표시          |
| 4.9  | 제외 장소 UI             | 제외된 장소 목록 + 교체/다른 날짜 추가     |
| 4.10 | Google Maps URL 내보내기 | 경로를 Google Maps URL로 변환 + 공유 버튼  |
| 4.11 | 경로 확정                | 선택 → 저장 + 확정 상태 전환               |

### 완료 기준

- 경로 결과에서 지도/타임라인 전환, 경로 비교 가능
- 각 장소에 선택 사유, 시그니처 메뉴, 평점 표시
- 경로 내 장소 순서 변경, 교체, 제거 후 실시간 재계산
- Google Maps URL로 경로 내보내기 동작 확인

---

## 7. Phase 5: PWA + 오프라인 + QA (1주)

### Week 10

| #   | 태스크             | 상세                                 |
| --- | ------------------ | ------------------------------------ |
| 5.1 | PWA 매니페스트     | 앱 이름, 아이콘, 시작 URL, 테마 색상 |
| 5.2 | Service Worker     | 캐싱 전략 구현 (App Shell, API)      |
| 5.3 | 오프라인 경로 저장 | IndexedDB에 확정 경로 저장           |
| 5.4 | 오프라인 UI        | 오프라인 배너, 읽기 전용 모드        |
| 5.5 | 다크 모드          | 전체 화면 다크 모드 대응             |
| 5.6 | QA + 버그 수정     | 크로스 브라우저, 엣지 케이스 테스트  |
| 5.7 | 성능 최적화        | Lighthouse 90+ 목표, 이미지 최적화   |

### 완료 기준

- PWA 설치 가능 (홈 화면 추가)
- 오프라인에서 확정 경로 확인 가능
- Lighthouse Performance 90+, PWA 100

---

## 8. Phase 6: 배포 + 런칭 (1주)

### Week 11-12

| #   | 태스크        | 상세                                   |
| --- | ------------- | -------------------------------------- |
| 6.1 | 프로덕션 배포 | Vercel (웹) + Railway (서버)           |
| 6.2 | 도메인 연결   | routie.app                             |
| 6.3 | 모니터링      | 에러 트래킹 (Sentry), 로깅             |
| 6.4 | 애널리틱스    | 사용자 행동 추적 (Mixpanel or PostHog) |
| 6.5 | 온보딩 화면   | 최초 진입 시 서비스 소개               |
| 6.6 | 베타 테스트   | 주변 여행자 5~10명 대상                |

---

## 9. Post-MVP 로드맵

### v1.1 — Import/Export 확장 + 멀티데이 (런칭 후 4주)

- 공유 리스트 URL 파싱 (Google Maps 공유 링크 → 장소 자동 추출)
- KML/GPX 경로 내보내기
- Calendar (.ics) 내보내기 (Google/Apple 캘린더 연동)
- 경로 공유 링크 생성
- 다중 날짜 경로 (3일, 5일 일정)
- 날짜 간 장소 자동 분배
- 소셜 로그인 추가 (Apple, Kakao)

### v1.2 — 실시간 + 협업 (런칭 후 8주)

- 실시간 교통 정보 반영 (지연, 우회)
- 그룹 여행 (다수 사용자 장소 통합)
- 실시간 위치 기반 다음 장소 안내
- 푸시 알림 (출발 시간 알림)

### v2.0 — AI + 네이티브 (런칭 후 16주)

- AI 기반 장소 추천 (취향 분석)
- 자연어 여행 계획 ("방콕에서 맛집 위주 2박 3일")
- 여행 기록 아카이빙 + 사진 연동
- 이미지 공유 (경로 카드를 SNS용 이미지로 저장)
- React Native 네이티브 앱 전환
- 완전한 오프라인 지도 (벡터 타일 캐싱)

---

## 10. 기술 부채 관리

| 시점            | 항목                                              |
| --------------- | ------------------------------------------------- |
| Phase 1 완료 후 | API 테스트 보강, DTO 유효성 검증 리뷰             |
| Phase 3 완료 후 | 경로 최적화 알고리즘 벤치마크, 엣지 케이스 테스트 |
| Phase 5 완료 후 | 코드 리뷰, 불필요한 의존성 정리, 번들 크기 최적화 |
| 매 Phase        | Lighthouse 체크, TypeScript strict 모드 준수 확인 |
